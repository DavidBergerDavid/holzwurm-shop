<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Holzwurm ¬∑ Studio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
/* ===== Light Studio Theme (Beige/Braun) ===== */
:root{
  --bg:#f7f3ef;               /* Grundfl√§che */
  --paper:#fffdf9;            /* Fl√§chen */
  --soft:#fbf7f2;             /* Sekund√§rfl√§chen */
  --line:#e9dfd5;             /* R√§nder */
  --text:#2b2620;             /* Prim√§rtext */
  --muted:#7a6f64;            /* Sekund√§rtext */
  --brand:#c08a59;            /* Akzent (warm braun) */
  --brand-2:#e5c39d;          /* heller Akzent */
  --ring:rgba(192,138,89,.35);
  --shadow:0 14px 40px rgba(128,94,62,.12);
  --star:#ffb400;
}

*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:Inter,system-ui,-apple-system,Segoe UI,Arial,sans-serif}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
small, .small{font-size:12px}
.muted{color:var(--muted)}

.container{max-width:1280px;margin:0 auto;padding:0 20px}
.row{display:flex;gap:12px;align-items:center}

/* ===== Header (light) ===== */
.utility{background:var(--soft);border-bottom:1px solid var(--line);font-size:12px;color:var(--muted)}
.utility .container{height:36px;display:flex;align-items:center;gap:16px}
.utility .push{margin-left:auto}
.tag{padding:4px 8px;border-radius:999px;background:var(--paper);border:1px solid var(--line);}

.mainbar{position:sticky;top:0;z-index:50;background:rgba(255,253,249,.9);backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
.mainbar .container{height:74px;display:flex;align-items:center}
.logo{display:grid;place-items:center;width:40px;height:40px;border-radius:10px;background:linear-gradient(135deg,var(--brand),#a76b3c);color:#fff;font-weight:800;box-shadow:var(--shadow)}
.brand{font-weight:800;letter-spacing:.4px}
nav.main{display:flex;gap:24px;margin:0 28px}
nav.main a{padding:10px 2px;border-bottom:2px solid transparent;text-transform:uppercase;letter-spacing:.06em;font-weight:700;font-size:13px;color:#574b40}
nav.main a:hover{border-color:var(--brand)}
.actions{display:flex;gap:10px;margin-left:auto}
input.search{background:var(--paper);border:1px solid var(--line);border-radius:12px;padding:12px 14px;width:300px}
input.search:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 4px var(--ring)}
button{border:1px solid transparent;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn{background:var(--brand);color:#fff;box-shadow:var(--shadow)}
.btn:hover{filter:brightness(1.05)}
.btn-outline{background:transparent;border:1px solid var(--brand);color:var(--brand)}
.btn-ghost{background:transparent;color:#574b40}

/* ===== Custom Select (sch√∂ne Dropdowns) ===== */
.select{position:relative;display:block}
.select select{
  appearance:none;-webkit-appearance:none;-moz-appearance:none;
  width:100%;padding:12px 14px;border-radius:12px;background:var(--paper);
  border:1px solid var(--line);font:inherit;color:var(--text);
}
.select:after{
  content:"‚ñæ"; position:absolute; right:12px; top:50%; transform:translateY(-50%);
  color:var(--muted); font-size:14px; pointer-events:none;
}
.select select:focus{outline:none;border-color:var(--brand);box-shadow:0 0 0 4px var(--ring)}

/* ===== Hero (Werbefoto) ===== */
.hero{
  position:relative; isolation:isolate;
  background:
    linear-gradient(180deg,rgba(255,253,249,.35),rgba(255,253,249,.9)),
    url('Werbefoto.png') center/cover no-repeat;
  min-height:58vh; display:flex; align-items:flex-end; border-bottom:1px solid var(--line)
}
.hero .wrap{padding:62px 0 48px}
.hero h1{font-size:42px;line-height:1.08;margin:0 0 8px}
.hero p{color:#5f544a;margin:0 0 16px;max-width:900px}
.cta-line{display:flex;gap:12px;flex-wrap:wrap}

/* ===== Sections & Cards ===== */
.section{padding:38px 0}
.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:18px}
.col-12{grid-column:span 12}
.col-6{grid-column:span 6}
.col-4{grid-column:span 4}
@media (max-width:1024px){ .col-6,.col-4{grid-column:span 12} }
.card{background:var(--paper);border:1px solid var(--line);border-radius:18px;overflow:hidden;box-shadow:var(--shadow)}
.pad{padding:16px}
.line{display:flex;align-items:center;justify-content:space-between;gap:10px}
.divider{height:1px;background:var(--line);margin:10px 0}

/* ===== Leistungen ‚Äì Banner ===== */
.banner{
  background:linear-gradient(90deg,var(--paper),#fff7ec);
  border:1px solid var(--line); border-radius:18px; box-shadow:var(--shadow); padding:22px;
  text-align:center; font-weight:700
}
.banner span{color:var(--brand);}

/* ===== Produktkarten ===== */
.heroimg{width:100%;height:220px;object-fit:cover}
.thumbbar{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.thumb{width:64px;height:48px;object-fit:cover;border-radius:8px;border:1px solid var(--line);cursor:pointer}

/* ===== Farbpalette (Frontdesign) ===== */
.palette{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.swatch{
  width:26px;height:26px;border-radius:7px;border:1px solid var(--line);cursor:pointer;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.6);
}
.swatch.active{outline:3px solid var(--ring);}

/* ===== Warenkorb ===== */
.cart{position:fixed;right:20px;top:86px;width:440px;max-width:calc(100% - 40px);background:var(--paper);border:1px solid var(--line);border-radius:18px;padding:16px;box-shadow:var(--shadow);display:none;max-height:88vh;overflow:auto;z-index:70}
.cart.open{display:block}
.cart-item{display:flex;gap:10px;margin:10px 0}
.cart-item img{width:80px;height:60px;object-fit:cover;border-radius:10px;border:1px solid var(--line)}

/* ===== Team ===== */
.team-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:20px}
.team-col{grid-column:span 6}
@media (max-width:1024px){ .team-col{grid-column:span 12} }
.member{display:flex;gap:16px;align-items:center;background:var(--soft);border:1px solid var(--line);padding:12px;border-radius:14px}
.member img{width:76px;height:76px;border-radius:50%;object-fit:cover;border:1px solid var(--line);background:#fff}
.member b{display:block}

/* ===== Bewertungen ===== */
.stars{color:var(--star);letter-spacing:2px}

/* ===== Footer ===== */
footer{border-top:1px solid var(--line);margin-top:24px;background:var(--paper)}
footer .container{display:flex;justify-content:space-between;align-items:center;height:68px}

/* ===== Modal (Login) ===== */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.35);display:none;align-items:center;justify-content:center;z-index:90}
.modal.open{display:flex}
.modal-card{background:var(--paper);border:1px solid var(--line);border-radius:16px;padding:18px;max-width:420px;width:92%}
</style>
</head>
<body>

<!-- Utility-Bar -->
<div class="utility">
  <div class="container">
    <span class="tag">Hotline: +43 6452 5552</span>
    <span class="tag">Kataloge</span>
    <span class="tag">Abverkauf</span>
    <a class="tag" href="#chatbot">Chatbot</a>
    <div class="push"></div>
    <a class="tag" href="#kontakt">Jetzt anfragen</a>
  </div>
</div>

<!-- Main-Nav -->
<header class="mainbar">
  <div class="container">
    <div class="row">
      <div class="logo">M</div>
      <div class="brand">HOLZWURM STUDIO</div>
    </div>
    <nav class="main">
      <a href="#leistungen">Leistungen</a>
      <a href="#shop">Produkte/Shop</a>
      <a href="#zerowaste">Zero Waste</a>
      <a href="#team">Optimierungsteam</a>
      <a href="#bewertungen">Bewertungen</a>
      <a href="#unternehmen">√úber uns</a>
      <a href="#kontakt">Kontakt</a>
    </nav>
    <div class="actions">
      <input id="search" class="search" placeholder="Suche im Shop‚Ä¶">
      <button id="cartBtn" class="btn">üõí Warenkorb <span id="cartCount">(0)</span></button>
      <button id="loginBtn" class="btn-outline">Kundenlogin</button>
    </div>
  </div>
</header>

<!-- Hero -->
<section class="hero">
  <div class="container wrap">
    <h1>Nat√ºrlich. Pr√§zise. Digital unterst√ºtzt.</h1>
    <p>Ein helles Studio-Look & Feel: Von der Idee bis zur perfekten M√∂bel-L√∂sung. Standard schnell bestellen, Sonderma√üe einfach anfragen.</p>
    <div class="cta-line">
      <a href="#shop" class="btn-outline">Shop √∂ffnen</a>
      <a href="#team" class="btn-outline">Unser Optimierungsteam</a>
    </div>
  </div>
</section>

<!-- Leistungen ‚Äì EIN Banner -->
<section id="leistungen" class="section">
  <div class="container">
    <div class="banner">
      <div style="font-size:22px">Qualit√§t und Leistung aus <span>√ñsterreich</span> ‚Äì gefertigt mit Pr√§zision und Leidenschaft.</div>
    </div>
  </div>
</section>

<!-- SHOP -->
<section id="shop" class="section">
  <div class="container">
    <div class="line">
      <h2 style="margin:0">M√∂belteile / Shop</h2>
      <span class="small muted">Standard direkt bestellen ¬∑ Individualzuschnitte per Anfrage</span>
    </div>
    <div id="products" class="grid" style="margin-top:14px"></div>

    <!-- Individualzuschnitt -->
    <article class="card" style="margin-top:16px">
      <div class="pad">
        <h3 style="margin:0 0 6px">Individualzuschnitte ‚Äì Anfrage</h3>
        <p class="muted small" style="margin:0 0 10px">Material, Ma√üe, Kanten & Oberfl√§che beschreiben; Preis je nach Lieferzeit.</p>
        <div class="row" style="gap:10px;margin-bottom:8px">
          <input id="custom_qty" type="number" min="1" value="1" style="width:120px">
          <input id="custom_title" placeholder="Bezeichnung (z. B. Wohnwand nach Ma√ü)" style="flex:1">
        </div>
        <textarea id="custom_note" rows="4" placeholder="Details: Material, L√óB√óSt√§rke, Kanten, St√ºckliste, Hinweise‚Ä¶" style="width:100%"></textarea>
        <div class="row" style="gap:10px;margin-top:10px">
          <label class="select" style="flex:1">
            <select id="custom_speed">
              <option value="8">Lieferzeit 8 Tage ‚Äì ‚Ç¨ 1.467,90</option>
              <option value="15" selected>Lieferzeit 15 Tage ‚Äì ‚Ç¨ 1.425,96</option>
              <option value="20">Lieferzeit 20 Tage ‚Äì ‚Ç¨ 1.370,04</option>
            </select>
          </label>
          <span class="small muted">Skizzen (PDF/DXF/JPG) sp√§ter im Formular hochladen.</span>
        </div>
        <div class="row" style="gap:10px;margin-top:10px">
          <button id="btnCustomAdd" class="btn-outline">‚ûï In Warenkorb</button>
        </div>
      </div>
    </article>
  </div>
</section>

<!-- ZERO WASTE: Holzsp√§ne & Verschnitt/B-Ware -->
<section id="zerowaste" class="section">
  <div class="container">
    <h2>Zero Waste ‚Äì alles aus dem Holz holen</h2>
    <div class="grid" style="margin-top:12px">
      <div class="col-6 card">
        <img src="Holzsp√§ne.jpg" alt="Holzsp√§ne" class="heroimg">
        <div class="pad">
          <h3>Holzsp√§ne als Anz√ºnder & Brennmaterial</h3>
          <p class="muted small">
            Die bei der Fertigung entstehenden Holzsp√§ne werden nicht entsorgt, sondern als
            sauberes Anz√ºndmaterial und Brennstoff weiterverwendet. Ideal f√ºr Kamin, Ofen oder
            Grill ‚Äì verpackt in handlichen S√§cken aus unserer Werkstatt.
          </p>
        </div>
      </div>
      <div class="col-6 card">
        <img src="verschnitt.jpg" alt="Verschnitt und B-Ware" class="heroimg">
        <div class="pad">
          <h3>Verschnitt &amp; B-Ware ‚Äì M√∂belteile mit Geschichte</h3>
          <p class="muted small">
            Restst√ºcke, Musterplatten und B-Ware erhalten bei uns eine zweite Chance:
            als g√ºnstige Rohlinge f√ºr DIY-Projekte, Werkstattm√∂bel oder Prototypen. So leben wir
            die Zero-Waste-Philosophie und nutzen den Rohstoff Holz m√∂glichst vollst√§ndig.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Optimierungsteam -->
<section id="team" class="section">
  <div class="container">
    <h2>Optimierungsteam</h2>
    <div class="team-grid" style="margin-top:14px">

      <div class="team-col">
        <div class="card"><div class="pad">
          <h3>Digitalisierung</h3>
          <div class="member" style="margin-top:10px">
            <img src="Berger.png" alt="Berger"><div><b>Berger</b><span class="small muted">Digitalisierung</span></div>
          </div>
          <div class="member" style="margin-top:10px">
            <img src="Maier.png" alt="Maier"><div><b>Maier</b><span class="small muted">Digitalisierung</span></div>
          </div>
        </div></div>
      </div>

      <div class="team-col">
        <div class="card"><div class="pad">
          <h3>Produktionsplanung</h3>
          <div class="member" style="margin-top:10px">
            <img src="Wimmer.png" alt="Wimmer"><div><b>Wimmer</b><span class="small muted">Produktionsplanung</span></div>
          </div>
          <div class="member" style="margin-top:10px">
            <img src="Kopanja.png" alt="Kopanja"><div><b>Kopanja</b><span class="small muted">Produktionsplanung</span></div>
          </div>
        </div></div>
      </div>

      <div class="team-col">
        <div class="card"><div class="pad">
          <h3>Finanzwesen / Controlling</h3>
          <div class="member" style="margin-top:10px">
            <img src="Vyborny.png" alt="Vyborny"><div><b>Vyborny</b><span class="small muted">Finanzen & Controlling</span></div>
          </div>
          <div class="member" style="margin-top:10px">
            <img src="Leitner.png" alt="Leitner"><div><b>Leitner</b><span class="small muted">Finanzen & Controlling</span></div>
          </div>
        </div></div>
      </div>

      <div class="team-col">
        <div class="card"><div class="pad">
          <h3>HR / Sales</h3>
          <div class="member" style="margin-top:10px">
            <img src="Heinschink.png" alt="Heinschink"><div><b>Heinschink</b><span class="small muted">HR ¬∑ Sales</span></div>
          </div>
        </div></div>
      </div>

    </div>
  </div>
</section>

<!-- Bewertungen -->
<section id="bewertungen" class="section">
  <div class="container">
    <h2>Kundenbewertungen</h2>
    <div class="grid" style="margin-top:12px">
      <div class="col-4 card"><div class="pad">
        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <p><b>Top Qualit√§t!</b> Passgenaue Schr√§nke, super Oberfl√§che. Von Bestellung bis Lieferung perfekt.</p>
        <p class="small muted">‚Äî Familie A., Salzburg</p>
      </div></div>
      <div class="col-4 card"><div class="pad">
        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <p><b>Sonderma√ü easy.</b> Ma√üe skizziert, Angebot kam flott. Umsetzung 1A ‚Äì gerne wieder.</p>
        <p class="small muted">‚Äî M. H., Linz</p>
      </div></div>
      <div class="col-4 card"><div class="pad">
        <div class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        <p><b>Schnell & freundlich.</b> Beratung top, Montage sauber. Wir sind sehr zufrieden!</p>
        <p class="small muted">‚Äî M. & K., Wien</p>
      </div></div>
    </div>
  </div>
</section>

<!-- Unternehmen ‚Äì 2 Karten nebeneinander -->
<section id="unternehmen" class="section">
  <div class="container">
    <h2>√úber uns</h2>
    <div class="grid" style="margin-top:12px">
      <div class="col-6 card"><div class="pad">
        <h3>Studio & Werkstatt</h3>
        <p class="muted">Qualit√§ts¬≠handwerk mit digitalem Prozess: CAD/CAM, Zuschnitt, Kanten, Montage. Pr√§zise und termintreu.</p>
      </div></div>
      <div class="col-6 card"><div class="pad">
        <h3>Nachhaltigkeit</h3>
        <p class="muted">Regionale Materialien, langlebig gefertigt, Verschnittoptimierung und kurze Wege ‚Äì f√ºr M√∂bel mit gutem Gef√ºhl.</p>
      </div></div>
    </div>
  </div>
</section>

<!-- Chatbot-Section (Anker) -->
<section id="chatbot" class="section">
  <div class="container">
    <h2>Chatbot</h2>
    <div class="card"><div class="pad">
      <p class="muted small">
        Hier k√∂nnte ein digitaler Assistent Fragen zu Produkten, Lieferzeiten oder Angeboten
        beantworten ‚Äì rund um die Uhr. In dieser Demo dient der Bereich als Platzhalter
        und Anker f√ºr den ‚ÄûChatbot‚Äú-Reiter in der Kopfzeile.
      </p>
    </div></div>
  </div>
</section>

<!-- Kontakt -->
<section id="kontakt" class="section">
  <div class="container">
    <h2>Kontakt</h2>
    <div class="grid" style="margin-top:12px">
      <div class="col-6 card"><div class="pad">
        <h3>So erreichen Sie uns</h3>
        <p class="muted">Holzwurm GmbH ¬∑ Musterstra√üe 1 ¬∑ 1234 Holzstadt<br>Tel. +43 660 123 45 67 ¬∑ <a href="mailto:info@holzwurm.at">info@holzwurm.at</a></p>
      </div></div>
      <div class="col-6 card"><div class="pad">
        <h3>Kontaktformular</h3>
        <div class="row" style="gap:10px">
          <input placeholder="Ihr Name" style="flex:1">
          <input placeholder="E-Mail" style="flex:1">
        </div>
        <textarea rows="4" placeholder="Ihre Nachricht" style="width:100%;margin-top:8px"></textarea>
        <button class="btn" style="margin-top:8px">Absenden</button>
      </div></div>
    </div>
  </div>
</section>

<!-- WARENKORB -->
<aside id="cart" class="cart">
  <div class="line">
    <h3 style="margin:0">Warenkorb</h3>
    <button class="btn-ghost" id="closeCart">‚úñ</button>
  </div>
  <div id="cartItems"></div>
  <div class="divider"></div>
  <div class="line small"><span class="muted">Zwischensumme (Netto)</span><b id="subtotal">‚Ç¨0,00</b></div>
  <label class="small" style="display:flex;gap:8px;align-items:center;margin:8px 0">
    <input type="checkbox" id="vatToggle" checked> Preise inkl. 20 % USt.
  </label>
  <div class="line small"><span class="muted">Gesamt (Netto)</span><b id="totalNet">‚Ç¨0,00</b></div>
  <div class="line small"><span class="muted">Gesamt (Brutto)</span><b id="totalGross">‚Ç¨0,00</b></div>
  <div class="row" style="gap:10px;margin-top:12px">
    <button class="btn-outline" id="clear">Leeren</button>
    <a id="download" class="btn-outline" download="holzwurm-warenkorb.json">
      <button class="btn-outline">JSON exportieren</button>
    </a>
  </div>

  <!-- Anfrage -->
  <div class="divider"></div>
  <div class="pad" style="background:var(--soft);border:1px solid var(--line);border-radius:14px">
    <h4 style="margin:4px 0 10px">Unverbindliche Angebotsanfrage</h4>
    <div class="row" style="gap:10px"><input id="c_company" placeholder="Firma (optional)" style="flex:1"><input id="c_name" placeholder="Ihr Name *" style="flex:1"></div>
    <input id="c_email" placeholder="E-Mail *" type="email" style="width:100%;margin-top:8px">
    <input id="c_phone" placeholder="Telefon (optional)" style="width:100%;margin-top:8px">
    <input id="c_addr" placeholder="Adresse (f√ºr Angebot/Lieferung)" style="width:100%;margin-top:8px">
    <div class="row" style="gap:10px;margin-top:8px">
      <label class="select" style="flex:1"><select id="c_delivery"><option>Abholung</option><option>Lieferung</option></select></label>
      <input id="c_date" type="date" style="flex:1">
    </div>
    <textarea id="c_notes" placeholder="Hinweise (z.B. Zuschnittma√üe, Termin)" style="width:100%;margin-top:8px"></textarea>
    <input id="c_files" type="file" multiple accept=".dxf,.pdf,.jpg,.jpeg,.png" style="width:100%;margin-top:8px">
    <label class="small" style="display:block;margin-top:6px"><input type="checkbox" id="c_gdpr"> Einwilligung zur Verarbeitung f√ºr Angebot</label>
    <button id="send" class="btn" style="width:100%;margin-top:10px">‚úÖ Unverbindlich anfragen</button>
    <div id="hint" class="small muted" style="margin-top:6px;display:none">‚úÖ Demo: Anfrage als JSON in der Browser-Konsole.</div>
    <details class="small" style="margin-top:6px"><summary>JSON ansehen (f√ºr API)</summary><pre id="payload" style="max-height:240px;overflow:auto;background:#fff;padding:10px;border-radius:12px;border:1px solid var(--line)"></pre></details>
  </div>

  <!-- Bestellung -->
  <div id="orderCard" class="pad" style="margin-top:12px;background:var(--soft);border:1px solid var(--line);border-radius:14px;display:none">
    <h4 style="margin:0 0 10px">Jetzt bestellen</h4>
    <div class="row" style="gap:10px"><input id="o_name" placeholder="Ihr Name *" style="flex:1"><input id="o_email" placeholder="E-Mail *" type="email" style="flex:1"></div>
    <input id="o_addr" placeholder="Lieferadresse *" style="width:100%;margin-top:8px">
    <div class="row" style="gap:10px;margin-top:8px">
      <label class="select" style="flex:1"><select id="o_shipping"><option>Abholung</option><option>Lieferung</option></select></label>
      <label class="select" style="flex:1"><select id="o_payment"><option>Rechnung</option><option>Bar/EC bei Abholung</option></select></label>
    </div>
    <button id="orderNow" class="btn" style="width:100%;margin-top:10px">üßæ Bestellung absenden</button>
    <div class="small muted" style="margin-top:6px">Demo-Checkout ‚Äì Ausgabe als JSON in der Konsole.</div>
  </div>
</aside>

<!-- Login-Modal -->
<div id="loginModal" class="modal" aria-hidden="true">
  <div class="modal-card">
    <div class="line"><h3 style="margin:0">Kundenlogin</h3><button id="closeLogin" class="btn-ghost">‚úñ</button></div>
    <p class="muted small">Demo-Login. F√ºr echten Zugriff sp√§ter Auth/Backend anbinden.</p>
    <input id="l_email" placeholder="E-Mail" type="email" style="width:100%">
    <input id="l_pass"  placeholder="Passwort" type="password" style="width:100%;margin-top:8px">
    <label class="small" style="display:block;margin-top:6px"><input type="checkbox"> angemeldet bleiben</label>
    <button id="doLogin" class="btn" style="width:100%;margin-top:10px">Anmelden</button>
  </div>
</div>

<footer>
  <div class="container">
    <p class="small muted">¬© <span id="year"></span> Holzwurm Studio</p>
    <p class="small muted">Beige/Braun Studio Theme ¬∑ Demo ohne Backend</p>
  </div>
</footer>

<script>
/* ===== Produktdaten (Preise 2022) ‚Äì Bilderreihenfolge: *2 zuerst ===== */
const PRODUCTS = [
  { id:"kom2", name:"Kommode 2-teilig", sku:"STD-K2", price:181.00, unit:"Stk", orderable:true,
    images:["Kommode 2 teillig ikea 2.avif","Kommode 2 teillig ikea.avif"],
    description:"Zweiteilige Standard-Kommode: Korpus Spanplatte, Fronten lackiert, Metallgriffe."
  },
  { id:"kom3", name:"Kommode 3-teilig", sku:"STD-K3", price:242.00, unit:"Stk", orderable:true,
    images:["Kommode 3 teillig ikea 2.jpg","Kommode 3 teillig ikea.avif"],
    description:"Dreiteilige Kommode, push-to-open, h√∂henverstellbare F√º√üe, ABS-Kanten."
  },
  { id:"kom4", name:"Kommode 4-teilig", sku:"STD-K4", price:303.00, unit:"Stk", orderable:true,
    images:["Kommode 4 teilig wei√ü ikea 2.avif","Kommode 4 teillig ikea.avif"],
    description:"Vierteilige Kommode mit Vollausz√ºgen, robuste Oberfl√§che."
  },
  { id:"schrklein", name:"Schrank klein", sku:"STD-CS", price:405.00, unit:"Stk", orderable:true,
    images:["schrank klein ikea 2.avif","schrank klein ikea.avif"],
    description:"Kleiderschrank 2-t√ºrig, verstellbare B√∂den, Alu-Stange, Softclose."
  },
  { id:"schrgross", name:"Schrank gro√ü", sku:"STD-CB", price:458.00, unit:"Stk", orderable:true,
    images:["Schrank gro√ü ikea 2.avif","Schrank gro√ü ikea wei√ü.avif"],
    description:"Gro√üer Schrank mit 3 Fachb√∂den und 2 Schubladen, Korpus-Dekor."
  },
  { id:"custom-base", name:"Individualzuschnitte (Basis)", sku:"CUST-BASE", price:1398.00, unit:"Auftrag", inquiryOnly:true,
    images:["Individualzuschnitt.jpg"],
    description:"Basis f√ºr ma√ügefertigte Zuschnitte. Skizze/Details bitte beilegen."
  }
];

/* Varianten */
const COLORS  = ["wei√ü","grau","braun","schwarz"];
const FINISH  = ["glatt","matt"];

/* Front-Design-Farbpalette (statt 64 Dropdown) */
const FRONT_PALETTE = [
  {name:"Polarwei√ü", hex:"#ffffff"},
  {name:"Seidengrau",hex:"#cfd2d3"},
  {name:"Basalt",    hex:"#6a6d72"},
  {name:"Graphit",   hex:"#2f3237"},
  {name:"Eiche hell",hex:"#d8c1a3"},
  {name:"Nuss",      hex:"#b1875b"},
  {name:"Kastanie",  hex:"#8f603c"},
  {name:"Schoko",    hex:"#5a3b28"},
  {name:"Sand",      hex:"#e6d7bf"},
  {name:"Taupe",     hex:"#b8a494"},
  {name:"Greige",    hex:"#d2c5b6"},
  {name:"Creme",     hex:"#f4e8d6"}
];

/* Helpers */
const el = s=>document.querySelector(s);
const fmt = n=> new Intl.NumberFormat("de-AT",{style:"currency",currency:"EUR"}).format(n);
const uid = ()=> Math.random().toString(36).slice(2)+Date.now().toString(36);
const state = { cart:[], query:"" };

/* Produkte rendern */
function renderProducts(){
  const q = state.query.toLowerCase();
  const html = PRODUCTS
    .filter(p => (p.name+p.sku).toLowerCase().includes(q))
    .map(p=>{
      const imgs = p.images?.length ? p.images : ["https://picsum.photos/1200/800?blur=3"];
      const pid = p.id;
      return `
      <article class="card col-4" style="grid-column:span 4">
        <img class="heroimg" src="${imgs[0]}" alt="${p.name}" data-main="${pid}">
        <div class="pad">
          <div class="line"><b>${p.name}</b><span class="muted small">${p.sku}</span></div>
          <p class="muted small" style="margin:8px 0">${p.description||""}</p>
          ${imgs.length>1?`<div class="thumbbar">${imgs.map(u=>`<img class="thumb" src="${u}" alt="" data-thumb="${pid}" data-src="${u}">`).join("")}</div>`:""}

          <div class="row" style="gap:10px;margin-top:10px">
            <div style="flex:1">
              <label class="small muted">Korpusfarbe</label>
              <label class="select"><select id="opt-color-${pid}">${COLORS.map(c=>`<option>${c}</option>`).join("")}</select></label>
            </div>
            <div style="flex:1">
              <label class="small muted">Oberfl√§che</label>
              <label class="select"><select id="opt-finish-${pid}">${FINISH.map(c=>`<option>${c}</option>`).join("")}</select></label>
            </div>
            <div style="width:120px">
              <label class="small muted">Menge</label>
              <input id="qty-${pid}" type="number" min="1" value="1" style="width:100%">
            </div>
          </div>

          <div style="margin-top:10px">
            <div class="small muted" style="margin-bottom:6px">Frontdesign</div>
            <div class="palette" id="pal-${pid}">
              ${FRONT_PALETTE.map((c,i)=>`<div class="swatch ${i===0?'active':''}" title="${c.name}" style="background:${c.hex}" data-swatch="${pid}" data-idx="${i}"></div>`).join("")}
            </div>
            <input type="hidden" id="design-${pid}" value="${FRONT_PALETTE[0].name}">
          </div>

          <div class="line" style="margin-top:12px">
            <div class="small"><span class="muted">Preis</span> <b>${fmt(p.price)}</b> / ${p.unit}</div>
            <button class="btn btn-add" data-id="${pid}">üõí In den Warenkorb</button>
          </div>
          <div class="small muted" style="margin-top:6px">${p.orderable? "Direkt bestellbar":"Nur Anfrage (Individual)"}</div>
        </div>
      </article>`;
    }).join("");

  el("#products").innerHTML = html;

  /* Events nach dem Rendern binden */
  // Add-to-cart
  document.querySelectorAll(".btn-add").forEach(btn=>{
    btn.addEventListener("click",()=>add(btn.dataset.id));
  });
  // Thumbnails
  document.querySelectorAll("[data-thumb]").forEach(img=>{
    img.addEventListener("click",()=>{
      const pid = img.dataset.thumb;
      const main = document.querySelector(`img[data-main="${pid}"]`);
      if(main) main.src = img.dataset.src;
    });
  });
  // Swatches
  document.querySelectorAll("[data-swatch]").forEach(sw=>{
    sw.addEventListener("click",()=>{
      const pid = sw.dataset.swatch;
      const idx = parseInt(sw.dataset.idx,10);
      pickSwatch(pid,idx);
    });
  });
}

function pickSwatch(pid,idx){
  const pal = document.getElementById(`pal-${pid}`);
  if(!pal) return;
  pal.querySelectorAll(".swatch").forEach((s,i)=>s.classList.toggle("active",i===idx));
  const designInput = document.getElementById(`design-${pid}`);
  if(designInput) designInput.value = FRONT_PALETTE[idx].name;
}

/* Warenkorb */
function add(pid){
  const p = PRODUCTS.find(x=>x.id===pid);
  if(!p) return;
  const qtyInput = el(`#qty-${pid}`);
  const qty = Math.max(1, parseInt(qtyInput ? qtyInput.value : "1",10));

  const colorSel  = el(`#opt-color-${pid}`);
  const finishSel = el(`#opt-finish-${pid}`);
  const color  = colorSel  ? colorSel.value  : "wei√ü";
  const finish = finishSel ? finishSel.value : "glatt";

  const designInput = el(`#design-${pid}`);
  const design = designInput ? designInput.value : FRONT_PALETTE[0].name;

  const mergeKey = `${pid}__${color}__${finish}__${design}`;

  const existing = state.cart.find(i=>i.mergeKey===mergeKey && !i.note);
  if(existing) existing.qty += qty;
  else state.cart.push({
    cartId:uid(), mergeKey,
    id:pid, sku:p.sku, name:p.name,
    price:p.price, unit:p.unit, qty,
    image:(p.images&&p.images[0])||"",
    color, finish, design,
    orderable:p.orderable, inquiryOnly:p.inquiryOnly
  });
  renderCart();
}

function changeQty(cartId,qty){
  const it=state.cart.find(c=>c.cartId===cartId);
  if(it){
    it.qty=Math.max(1,qty||1);
    renderCart();
  }
}
function removeItem(cartId){ state.cart=state.cart.filter(c=>c.cartId!==cartId); renderCart(); }
function clearCart(){ state.cart=[]; renderCart(); }

/* Individualzuschnitt */
function addCustom(){
  const qtyInput = el("#custom_qty");
  const qty  = Math.max(1, parseInt(qtyInput ? qtyInput.value : "1", 10));
  const name = (el("#custom_title")?.value || "Individualzuschnitt").trim();
  const note = (el("#custom_note")?.value || "").trim();
  const base = PRODUCTS.find(p=>p.id==="custom-base");
  const speed = (el("#custom_speed")?.value || "15");
  const priceMap = {"8":1467.90,"15":1425.96,"20":1370.04};
  const price = priceMap[speed] ?? base?.price ?? 0;

  state.cart.push({
    cartId:uid(), mergeKey:`custom-${speed}-${Date.now()}`,
    id:"custom-base", sku:(base?.sku||"CUST-BASE")+`-${speed}d`,
    name, price, unit:base?.unit||"Auftrag", qty,
    image:(base?.images && base.images[0]) || "https://picsum.photos/600/400?blur=2",
    note, inquiryOnly:true
  });

  if(qtyInput) qtyInput.value = 1;
  if(el("#custom_title")) el("#custom_title").value="";
  if(el("#custom_note"))  el("#custom_note").value="";
  if(el("#custom_speed")) el("#custom_speed").value="15";

  renderCart();
}

/* Cart render & payloads */
function renderCart(){
  el("#cartCount").textContent = `(${state.cart.length})`;
  el("#cartItems").innerHTML = state.cart.map(it=>`
    <div class="cart-item">
      <img src="${it.image}" alt="">
      <div style="flex:1">
        <div><b>${it.name}</b></div>
        <div class="small muted">${it.sku||""}</div>
        ${it.color? `<div class="small">Korpus: ${it.color}, Oberfl√§che: ${it.finish||"-"}, Front: ${it.design||""}</div>`:""}
        ${it.note? `<div class="small"><b>Notiz:</b> ${it.note}</div>`:""}
        <div class="small">${fmt(it.price)} / ${it.unit}</div>
        <div class="row" style="gap:8px;margin-top:6px">
          <input type="number" min="1" value="${it.qty}" style="width:80px" onchange="changeQty('${it.cartId}',this.value)">
          <button class="btn-ghost" onclick="removeItem('${it.cartId}')">üóëÔ∏è Entfernen</button>
        </div>
      </div>
    </div>`).join("") || `<p class="small muted">Noch keine Artikel.</p>`;

  const VAT = 0.20;
  const sumNet = state.cart.reduce((a,it)=>a+it.qty*it.price,0);
  const vatOn = el("#vatToggle")?.checked ?? true;
  const sumGross = vatOn ? sumNet*(1+VAT) : sumNet;

  el("#subtotal").textContent = fmt(sumNet);
  el("#totalNet").textContent = fmt(sumNet);
  el("#totalGross").textContent = fmt(sumGross);

  el("#download").setAttribute(
    "href",
    "data:application/json;charset=utf-8,"+
    encodeURIComponent(JSON.stringify(state.cart,null,2))
  );

  const filesInput = el("#c_files");
  const files = filesInput && filesInput.files ? Array.from(filesInput.files) : [];
  const fileMeta = files.map(f=>({name:f.name,size:f.size,type:f.type}));

  const payload = {
    company: el("#c_company")?.value || "",
    contact: el("#c_name")?.value || "",
    email:   el("#c_email")?.value || "",
    phone:   el("#c_phone")?.value || "",
    address: el("#c_addr")?.value || "",
    delivery: el("#c_delivery")?.value || "Abholung",
    requestedDate: el("#c_date")?.value || "",
    notes:   el("#c_notes")?.value || "",
    items: state.cart.map(({id,sku,name,qty,price,unit,note,color,finish,design})=>({id,sku,name,qty,price,unit,note,color,finish,design})),
    totals:{net:sumNet,vatRate:VAT,gross:sumGross,vatIncluded:vatOn},
    files:fileMeta, createdAt:new Date().toISOString(), source:"holzwurm-studio"
  };
  el("#payload").textContent = JSON.stringify(payload,null,2);

  const hasItems = state.cart.length>0;
  const allOrderable = hasItems && state.cart.every(i => i.inquiryOnly? false : (i.orderable ?? true));
  el("#orderCard").style.display = allOrderable ? "block" : "none";

  if(allOrderable){
    el("#orderNow").onclick = ()=>{
      const orderPayload = {
        type:"order",
        customer:{
          name:el("#o_name")?.value||"",
          email:el("#o_email")?.value||"",
          address:el("#o_addr")?.value||"",
          shipping:el("#o_shipping")?.value||"Abholung",
          payment:el("#o_payment")?.value||"Rechnung",
        },
        items: state.cart.map(({id,sku,name,qty,price,unit,color,finish,design})=>({id,sku,name,qty,price,unit,color,finish,design})),
        totals:{net:sumNet,vatRate:VAT,gross:sumGross,vatIncluded:vatOn},
        createdAt:new Date().toISOString(), source:"holzwurm-studio"
      };
      if(!orderPayload.customer.name || !orderPayload.customer.email || !orderPayload.customer.address){
        alert("Bitte Name, E-Mail und Lieferadresse angeben."); return;
      }
      console.log("DEMO ‚Äì Bestellung:", orderPayload);
      alert("Danke! Bestellung (Demo) erzeugt. Siehe Konsole.");
    };
  }
}

/* Init / UI */
document.addEventListener("DOMContentLoaded",()=>{
  el("#year").textContent = new Date().getFullYear();
  renderProducts();
  renderCart();

  el("#search").oninput = e=>{ state.query=e.target.value; renderProducts(); };
  el("#cartBtn").onclick = ()=> el("#cart").classList.add("open");
  el("#closeCart").onclick = ()=> el("#cart").classList.remove("open");
  el("#clear").onclick = clearCart;
  if(el("#vatToggle")) el("#vatToggle").onchange = renderCart;

  // Individualzuschnitt-Button
  const customBtn = el("#btnCustomAdd");
  if(customBtn) customBtn.onclick = addCustom;

  // Login
  const modal = el("#loginModal");
  el("#loginBtn").onclick   = ()=> modal.classList.add("open");
  el("#closeLogin").onclick = ()=> modal.classList.remove("open");
  el("#doLogin").onclick    = ()=>{
    const email=el("#l_email").value.trim(), pass=el("#l_pass").value.trim();
    if(!email||!pass){ alert("Bitte E-Mail & Passwort eingeben."); return; }
    alert("Demo-Login erfolgreich (ohne Backend).");
    modal.classList.remove("open");
  };

  // Smooth scroll
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener("click",e=>{
      const id=a.getAttribute("href"), tgt=document.querySelector(id);
      if(tgt){ e.preventDefault(); tgt.scrollIntoView({behavior:"smooth",block:"start"}); }
    });
  });

  // Anfrage senden (Demo)
  el("#send").onclick=()=>{
    const name=el("#c_name").value.trim(), mail=el("#c_email").value.trim();
    if(!name||!mail){ alert("Bitte Name & E-Mail angeben."); return; }
    if(!el("#c_gdpr").checked){ alert("Bitte Einwilligung best√§tigen."); return; }
    try{
      const p=JSON.parse(el("#payload").textContent);
      console.log("DEMO ‚Äì Angebotsanfrage:", p);
      el("#hint").style.display="block";
      alert("Danke! Anfrage (Demo) erzeugt. Siehe Konsole.");
    }catch(err){ console.error(err); alert("Fehler beim Erzeugen der Anfrage."); }
  };
});
</script>
</body>
</html>
